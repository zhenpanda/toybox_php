/*	
 * jQuery mmenu columns addon
 * mmenu.frebsite.nl
 *
 * Copyright (c) Fred Heusschen
 */
!function(i){var s="mmenu",e="columns";i[s].addons[e]={setup:function(){var a=this.opts[e];this.conf[e];if(l=i[s].glbl,"boolean"==typeof a&&(a={add:a}),"number"==typeof a&&(a={add:!0,visible:a}),"object"!=typeof a&&(a={}),"number"==typeof a.visible&&(a.visible={min:a.visible,max:a.visible}),a=this.opts[e]=i.extend(!0,{},i[s].defaults[e],a),a.add){a.visible.min=Math.max(1,Math.min(6,a.visible.min)),a.visible.max=Math.max(a.visible.min,Math.min(6,a.visible.max)),this.$menu.addClass(n.columns);for(var t=this.opts.offCanvas?this.$menu.add(l.$html):this.$menu,o=[],d=0;d<=a.visible.max;d++)o.push(n.columns+"-"+d);o=o.join(" ");var h=function(i){c.call(this,this.$pnls.children("."+n.current))},m=function(){var i=this.$pnls.children("."+n.panel).filter("."+n.opened).length;i=Math.min(a.visible.max,Math.max(a.visible.min,i)),t.removeClass(o).addClass(n.columns+"-"+i)},r=function(){this.opts.offCanvas&&l.$html.removeClass(o)},c=function(s){this.$pnls.children("."+n.panel).removeClass(o).filter("."+n.subopened).removeClass(n.hidden).add(s).slice(-a.visible.max).each(function(s){i(this).addClass(n.columns+"-"+s)})};this.bind("open",m),this.bind("close",r),this.bind("init",h),this.bind("openPanel",c),this.bind("openingPanel",m),this.bind("openedPanel",m),this.opts.offCanvas||m.call(this)}},add:function(){n=i[s]._c,a=i[s]._d,t=i[s]._e,n.add("columns")},clickAnchor:function(s,a){if(!this.opts[e].add)return!1;if(a){var t=s.attr("href");if(t.length>1&&"#"==t.slice(0,1))try{var l=i(t,this.$menu);if(l.is("."+n.panel))for(var o=parseInt(s.closest("."+n.panel).attr("class").split(n.columns+"-")[1].split(" ")[0],10)+1;o!==!1;){var d=this.$pnls.children("."+n.columns+"-"+o);if(!d.length){o=!1;break}o++,d.removeClass(n.subopened).removeClass(n.opened).removeClass(n.current).removeClass(n.highest).addClass(n.hidden)}}catch(h){}}}},i[s].defaults[e]={add:!1,visible:{min:1,max:3}};var n,a,t,l}(jQuery);